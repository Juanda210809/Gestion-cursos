<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
	integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N"
	crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" th:href="@{/Diseños/encabezado.css}">
<link rel="stylesheet" th:href="@{/Diseños/listacursos.css}">
<link rel="stylesheet" th:href="@{/Diseños/alert.css}">
<link rel="stylesheet" th:href="@{/Diseños/busquedapaginacion.css}">

<title>Gestion de cursos</title>


</head>
<body>


<div th:insert="~{fragments/header :: header}"></div>




<div class="container my-3">
    <form id="searchForm" th:action="@{/cursos}" method="get">
        <div class="search-container">
            
            <!-- Caja de búsqueda -->
            <div class="search-box">
                <i class="fa fa-search"></i>
                <input id="keyword" type="search" name="keyword" th:value="${keyword}"
                       required placeholder="Buscar curso..." />
                <button type="submit">Buscar</button>
            </div>

            <!-- Select de tamaño de página -->
            <div class="page-size-container">
                <label for="pageSize">Elementos por página:</label>
                <select form="searchForm" name="size" th:value="${pageSize}"
                        onchange="changePageSize()" id="pageSize">
                    <option th:each="s : ${ { 3, 6, 9} }"
                            th:value="${s}" th:text="${s}"
                            th:selected="${s == pageSize}"></option>
                </select>
            </div>

        </div>
    </form>
</div>


	<div class="container mb-5">
		<div class="container mb-5">

			<div th:if="${message != null}"
				class="alert alert-success alert-dismissible fade show text-center message">
				[[${message}]]
				<button type="button" class="close btn-sm" data-dismiss="alert"
					aria-label="Cerrar">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>

		</div>

	</div>
	
	
	<div class="container">
		<div class="row mb-3">
			<a th:href="@{/export/pdf}" class="btn btn-danger">Generar PDF</a>
			&nbsp;&nbsp;&nbsp;
			<a th:href="@{/export/excel}" class="btn btn-success">Generar Excel</a>
		
		</div>
	</div>

	<div class="table-container" >

		<table class="table table-hover">
			<thead>
				<tr>
					<th scope="col">ID</th>
					<th scope="col">Titulo</th>
					<th scope="col">Descripcion</th>
					<th scope="col">Nivel</th>
					<th scope="col">Publicado</th>
					<th scope="col">Acciones</th>
				</tr>
			</thead>

			<tbody>
				<tr th:each="curso : ${cursos}">
					<td>[[${curso.id}]]</td>
					<td>[[${curso.titulo}]]</td>
					<td>[[${curso.descripcion}]]</td>
					<td>[[${curso.nivel}]]</td>
					<td> <a th:if="${curso.isPublicado == true}" class="fa-regular fa-square-check"></a>
					 <a th:if="${curso.isPublicado == false}" class="fa-regular fa-square icon-dark"></a>
					</td>
					
					<td>
					
						<a th:href="@{'cursos/'} +  ${curso.id}" title="Editar curso" class="fa-regular fa-pen-to-square icon-dark btn btn-primary"></a>
						<a th:href="@{'cursos/delete/'} +  ${curso.id}" title="Editar curso" id="btnDelete"class="fa-regular fa-trash-can icon-dark btn btn-danger"></a>
					</td>

				</tr>


			</tbody>

		</table>

	</div>
	
	<div class="pagination-container">
    <ul class="pagination">
        <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
            <a class="page-link"
               th:href="@{/cursos(page=${currentPage - 1}, size=${pageSize}, keyword=${keyword})}">Anterior</a>
        </li>

        <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}"
            th:classappend="${i == currentPage} ? 'active'">
            <a class="page-link"
               th:href="@{/cursos(page=${i}, size=${pageSize}, keyword=${keyword})}"
               th:text="${i}"></a>
        </li>

        <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
            <a class="page-link"
               th:href="@{/cursos(page=${currentPage + 1}, size=${pageSize}, keyword=${keyword})}">Siguiente</a>
        </li>
    </ul>
</div>
	


<script type="text/javascript">

function changePageSize(){
	
	$('#searchForm').submit();
}

</script>
	<script
		src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
		crossorigin="anonymous"></script>
</body>
</html>